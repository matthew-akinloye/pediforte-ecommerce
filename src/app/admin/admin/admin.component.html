<!-- <div class="container">
  <h2 class="my-4">Admin Dashboard</h2>


  <div class="mb-4">
    <div class="input-group">
      <input type="text" class="form-control" [(ngModel)]="searchTerm" placeholder="Search users by email or name">
      <button class="btn btn-primary" (click)="searchUsers()">Search</button>
    </div>
  </div>


  <div class="dashboard-section">
    <h3>Users</h3>
  

    <div *ngIf="isLoading" class="text-center">
      <div class="spinner-border" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>


    <div *ngIf="!isLoading && noResults" class="text-center text-muted">
      No results found.
    </div>


    <ul class="list-group">
      <li *ngFor="let user of (users$ | async)"
        class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          Name: {{ user.firstName }} {{ user.lastName }} <br>
          Email: {{ user.email }}
        </div>
        <div>
          <button class="btn btn-danger btn-action" (click)="blockUser(user.uid)">Block</button>
          <button class="btn btn-warning btn-action" (click)="banUser(user.uid)">Ban</button>
          <button class="btn btn-danger btn-action" (click)="deleteUser(user.uid)">Delete</button>
          <button class="btn btn-info btn-action" (click)="loadOrders(user.uid)">View Orders</button>
        </div>
      </li>
    </ul>
  </div>


  <div class="dashboard-section" *ngIf="selectedUserId">
    <h3>Orders</h3>
    <h4>Orders for User: {{ selectedUserId }}</h4>
    <ul class="list-group">
      <li *ngFor="let order of (orders$ | async) ?? []" class="list-group-item">
        <div>
          Order ID: {{ order.id }} <br>
          Status: {{ order.status }} <br>
          Created At: {{ order.createdAt | date }} <br>
  
        </div>
      </li>
    </ul>
  </div>

  <div class="dashboard-section">
    <h3>Payments</h3>

    <ul class="list-group">
      <li *ngFor="let payment of (payments$ | async) ?? []" class="list-group-item">
        <div>
          Payment ID: {{ payment.id }} <br>
          Amount: {{ payment.amount | currency }} <br>
          Date: {{ payment.date?.toDate() | date:'short' }} <br>

        </div>
      </li>
    </ul>
  </div>
</div>
 -->













<div id="wrapper">



  <!-- Content Wrapper -->
  <div id="content-wrapper" class="d-flex flex-column">

    <!-- Main Content -->
    <div id="content">

      <!-- Topbar -->
      <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

        <!-- Sidebar Toggle (Topbar) -->
        <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
          <i class="fa fa-bars"></i>
        </button>

        <!-- Topbar Search -->
        <div class="d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search">
          <div class="input-group">
            <input type="text" class="form-control bg-light border-0 small" [(ngModel)]="searchTerm"
              placeholder="Search users by email or name" aria-label="Search" aria-describedby="basic-addon2">
            <div class="input-group-append">
              <button class="btn btn-primary" (click)="searchUsers()" type="button">
                <i class="fas fa-search fa-sm"></i>
              </button>
            </div>
          </div>
        </div>



      </nav>
      <!-- End of Topbar -->

      <!-- Begin Page Content -->
      <div class="container-fluid">

        <!-- Page Heading -->
        <div class="d-sm-flex align-items-center justify-content-between mb-4">
          <h1 class="h3 mb-0 text-gray-800">Dashboard</h1>


          <div *ngIf="!isLoading && noResults" class="text-center text-muted">
            No results found.
          </div>

          <!-- <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
              class="fas fa-download fa-sm text-white-50"></i> Generate Report</a> -->
        </div>

      

        <div class="card shadow mb-4">
          <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">User Table</h6>
          </div>
          <div class="card-body">


            <div *ngIf="isLoading" class="text-center">
              <div class="spinner-border" role="status">
                <span class="sr-only">Loading...</span>
              </div>
            </div>

            <div class="table-responsive">
              <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Actions</th>
                  </tr>
                </thead>
               
                <tbody>
                  <tr *ngFor="let user of (users$ | async)">
                    <td>{{ user.firstName }} {{ user.lastName }}</td>
                    <td>{{ user.email }}</td>
                    <td>
                      <button class="btn btn-danger btn-sm" (click)="blockUser(user.uid)">Block</button>
                      <button class="btn btn-warning btn-sm" (click)="banUser(user.uid)">Ban</button>
                      <button class="btn btn-danger btn-sm" (click)="deleteUser(user.uid)">Delete</button>
                      <button class="btn btn-info btn-sm" (click)="loadOrders(user.uid)">View Orders</button>
                    </td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>
        </div>
        <!-- Content Row -->
        <div class="card shadow mb-4">
          <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">User Orders</h6>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-bordered" id="ordersTable" width="100%" cellspacing="0" *ngIf="selectedUserId">
                <thead>
                  <tr>
                    <th>Order ID</th>
                    <th>Status</th>
                    <th>Created At</th>
                    <!-- Add more headers as needed -->
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let order of (orders$ | async) ?? []">
                    <td>{{ order.id }}</td>
                    <td>{{ order.status }}</td>
                    <td>{{ order.createdAt | date }}</td>
                    <!-- Add more details as needed -->
                  </tr>
                </tbody>
              </table>


            </div>
          </div>
        </div>
        <!-- Content Row -->
        <div class="card shadow mb-4">
          <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Users Payments</h6>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-bordered" id="paymentsTable" width="100%" cellspacing="0">
                <thead>
                  <tr>
                    <th>Payment ID</th>
                    <th>Amount</th>
                    <th>Date</th>
                    <!-- Add more headers as needed -->
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let payment of (payments$ | async) ?? []">
                    <td>{{ payment.id }}</td>
                    <td>{{ payment.amount | currency }}</td>
                    <td>{{ payment.date?.toDate() | date:'short' }}</td>
                    <!-- Add more details as needed -->
                  </tr>
                </tbody>
              </table>



            </div>
          </div>
        </div>
      </div>
      <!-- /.container-fluid -->

    </div>
    <!-- End of Main Content -->



  </div>
  <!-- End of Content Wrapper -->

</div>